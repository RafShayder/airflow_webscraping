mode: "${ENV_MODE}"
logging_level: "${LOGGING_LEVEL}"

# ============================================================================
# PostgreSQL (credenciales y conexión)
# ============================================================================
postgress:
  user: "siom_test"
  password: "s10m#tst"
  host: "10.226.17.162"
  port: 5425
  database: "siom_test"

# ============================================================================
# SFTP Energía (credenciales y conexión)
# ============================================================================
sftp_energia_c:
  host: "10.252.206.132"
  port: 22
  username: "ti_etl"
  password: "0p3r4d0r#1"

sftp_energia:
  remote_dir: "/REPORTES_CONSUMOS"
  local_dir: "tmp/sftp_energia"
  specific_filename: "reporte-consumo-energia-PD"
  specific_filename2: "reporte-consumo-energia-DA"
  schema: "RAW"
  table_DA: "SFTP_MM_CONSUMO_SUMINISTRO_DA"
  table_PD: "SFTP_MM_CONSUMO_SUMINISTRO_PD"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  sp_carga_DA: "ods.sp_cargar_sftp_hm_consumo_suministro_da"
  sp_carga_PD: "ods.sp_cargar_sftp_hm_consumo_suministro_pd"
  errorconfig:
    schema: "PUBLIC"
    table: "error_energia_ultimo_lote"
    limmit: 100
    remote_dir: "/daas/qa/energy-facilities/"

# ============================================================================
# SFTP DAAS (credenciales y conexión)
# ============================================================================
sftp_daas_c:
  host: "10.226.195.181"
  port: 22
  username: "usr_app_daas"
  password: "Cv8mY8sK$5"

sftp_base_sitios:
  remote_dir: "/daas/qa/energy-facilities/base-sitios/input"
  local_dir: "tmp/sftp_base_sitios"
  schema: "raw"
  table: "FS_MM_BASE_DE_SITIOS"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  specific_filename: "BASE_SITIOS"
  sp_carga: "ods.sp_cargar_fs_hm_base_de_sitios"

sftp_base_sitios_bitacora:
  remote_dir: "/daas/qa/energy-facilities/base-sitios/input"
  local_dir: "tmp/sftp_base_sitios"
  schema: "RAW"
  table: "FS_MM_BITACORA_BASE_SITIOS"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  specific_filename: "BASE_SITIOS"
  sp_carga: "ods.sp_cargar_fs_hm_bitacora_base_sitios"

# ============================================================================
# Web Indra (scraping de recibos de energía)
# ============================================================================
webindra_energia:
  # Configuración de scraping
  BASE_URL: "https://recibosttr.com/sistema"
  LOGIN_PATH: "/"
  EXPORT_TMPL: "/sisReportes/exportarRecibosSpoutConsumo/{start}/{end}"
  USER: "usuario.tdp"
  PASS: "usuario.tdp2021"
  PERIOD_MONTHS: 2
  TIMEOUT: 120
  MAX_RETRIES: 3
  PROXY: "telefonica01.gp.inet:8080"
  HEADERS:
    User-Agent: "Mozilla/5.0"
    Accept: "*/*"
    Connection: "keep-alive"

  # Configuración de archivos
  local_dir: "tmp/web_indra"
  specific_filename: "recibos_energia_indra.xlsx"

  # Configuración de carga a BD
  schema: "raw"
  table: "web_mm_indra_energia"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  sp_carga: "ods.sp_cargar_web_hm_indra_energia"

  # Configuración de errores
  errorconfig:
    schema: "PUBLIC"
    table: "error_energia_ultimo_lote"
    limmit: 100
    remote_dir: "/daas/qa/energy-facilities/errors"

# ============================================================================
# Clientes Libres (SFTP)
# ============================================================================
clientes_libres:
  # Configuración de SFTP
  remote_dir: "/daas/qa/energy-facilities/recibos-manuales/input/"
  local_dir: "tmp/sftp_clientes_libres"
  specific_filename: "F-TELEFONICA"
  local_destination_dir: "tmp/sftp_clientes_libres/processed/clientes_libres.xlsx"

  # Configuración de carga a BD
  schema: "raw"
  table: "sftp_mm_clientes_libres"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  sp_carga: "ods.sp_cargar_sftp_hm_clientes_libres"

# ============================================================================
# Teleows / Integratel Portal (GDE, Dynamic Checklist)
# ============================================================================
teleows:
  # Credenciales del portal
  username: "Integratel_Data"
  password: "Integratel1!TI"

  # Configuración general de scraping (compartida por todos los scrapers)
  download_path: "tmp/teleows"
  max_iframe_attempts: 60
  max_status_attempts: 60
  options_to_select: "CM,OPM"  # Opciones para GDE: CM, OPM, PM, PLM
  export_overwrite_files: true
  proxy: "telefonica01.gp.inet:8080"
  headless: true

# ============================================================================
# GDE (Console GDE)
# ============================================================================
gde:
  # Configuración de extracción
  local_dir: "tmp/teleows"
  specific_filename: "Console_GDE_export.xlsx"

  # Configuración de fechas
  date_mode: 1  # 1=rango manual (usa last_n_days), 2=último mes automático
  last_n_days: 45  # Últimos N días desde hoy (solo funciona con date_mode=1)

  # Configuración de carga a BD
  schema: "raw"
  table: "web_mm_autin_infogeneral"
  if_exists: "replace"  # 'append' | 'replace' | 'fail'
  chunksize: 10000
  sp_carga: "ods.sp_cargar_gde_tasks"

  # Configuración de errores
  errorconfig:
    schema: "PUBLIC"
    table: "error_gde_ultimo_lote"
    limmit: 100
    remote_dir: "/daas/qa/energy-facilities/gde/errors"

# ============================================================================
# Dynamic Checklist (Sub PM Query)
# ============================================================================
dynamic_checklist:
  # Configuración de extracción
  local_dir: "tmp/teleows"
  specific_filename: "DynamicChecklist_SubPM.xlsx"

  # Configuración de fechas
  date_mode: 1  # 1=rango manual (usa last_n_days), 2=último mes automático
  last_n_days: 60  # Últimos N días desde hoy (solo funciona con date_mode=1)

  # Configuración de carga a BD
  schema: "raw"
  table: "dynamic_checklist_tasks"
  load_mode: "append"  # Siempre append para histórico
  chunksize: 10000
  sp_carga: "ods.sp_cargar_dynamic_checklist_tasks"

  # Configuración de errores
  errorconfig:
    schema: "PUBLIC"
    table: "error_dynamic_checklist_ultimo_lote"
    limmit: 100
    remote_dir: "/daas/qa/energy-facilities/dynamic_checklist/errors"
